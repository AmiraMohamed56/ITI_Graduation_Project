<div class="container mx-auto px-4 py-12">
  <!-- Section Header with See All Button (only show if showSeeAll is true) -->
  <div class="flex justify-between items-center mb-8" *ngIf="showSeeAll">
    <div>
      <!-- <h2 class="text-3xl font-bold text-gray-800 mb-2">Our Doctors</h2> -->
      <p class="text-gray-600">Meet our experienced healthcare professionals</p>
    </div>
    
    <a 
      routerLink="/doctors/all" 
      class="flex items-center gap-2 px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition duration-300 shadow-md hover:shadow-lg"
    >
      <span>See All</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
      </svg>
    </a>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="text-red-600 text-center mb-4 bg-red-50 p-4 rounded-lg">
    {{ error }}
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="flex justify-center my-12">
    <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500 border-b-4"></div>
  </div>

  <!-- Doctors Grid -->
  <div *ngIf="!loading && displayedDoctors.length > 0" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    <div *ngFor="let doctor of displayedDoctors" class="bg-white shadow-lg rounded-2xl p-6 hover:shadow-2xl transform hover:-translate-y-1 transition duration-300 flex flex-col items-center text-center">
      
      <!-- Doctor Image or Initial -->
      <div class="w-32 h-32 mb-4 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 text-3xl font-bold overflow-hidden">
        <img 
          *ngIf="getDoctorImage(doctor)" 
          [src]="getDoctorImage(doctor)" 
          [alt]="doctor.user?.name || 'Doctor'" 
          class="w-full h-full object-cover rounded-full" 
          (error)="$any($event.target).src=''"
        />
        <span *ngIf="!getDoctorImage(doctor)">
          {{ getDoctorInitial(doctor) }}
        </span>
      </div>

      <!-- Doctor Name -->
      <h3 class="text-lg sm:text-xl font-semibold text-gray-800 mb-2">
        Dr. {{ doctor.user?.name || 'Unknown' }}
      </h3>
      
      <!-- Specialty -->
      <p class="text-sm text-blue-600 font-medium mb-3">
        {{ doctor.specialty?.name || 'General Practice' }}
      </p>

      <!-- Bio -->
      <p *ngIf="!showSeeAll && doctor.bio" class="text-xs text-gray-600 mb-3 line-clamp-2">{{ doctor.bio }}</p>

      <!-- Quick Info -->
      <div class="w-full text-left space-y-1 mb-4">
        <p class="text-sm text-gray-500" *ngIf="!showSeeAll">
          <strong>Education:</strong> {{ doctor.education || 'N/A' }}
        </p>
        <p class="text-sm text-gray-500">
          <strong>Experience:</strong> {{ doctor.years_experience }} years
        </p>
        <p class="text-sm text-gray-500" *ngIf="!showSeeAll">
          <strong>Gender:</strong> {{ doctor.gender }}
        </p>
        <p class="text-sm text-gray-500">
          <strong>Fee:</strong> ${{ doctor.consultation_fee }}
        </p>
        <p class="text-sm text-gray-500">
          <strong>Rating:</strong> {{ doctor.rating_avg || doctor.rating || 0 }} ‚≠ê
          <span *ngIf="doctor.reviews_count && !showSeeAll" class="text-xs">({{ doctor.reviews_count }} reviews)</span>
        </p>
        <p class="text-sm text-gray-500" *ngIf="!showSeeAll">
          <strong>Online:</strong> 
          <span [class]="doctor.available_for_online ? 'text-green-600' : 'text-red-600'">
            {{ doctor.available_for_online ? 'Available' : 'Not Available' }}
          </span>
        </p>
      </div>

      <!-- View Profile Button -->
      <a 
        [routerLink]="['/doctor', doctor.id]" 
        class="w-full bg-blue-500 text-white py-2 rounded-xl hover:bg-blue-600 transition text-center block"
      >
        View Profile
      </a>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && displayedDoctors.length === 0" class="text-center py-12">
    <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <p class="text-xl text-gray-600">No doctors available at the moment</p>
  </div>
</div>

<style>
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}
</style>