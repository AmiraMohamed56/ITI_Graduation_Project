<div class="max-w-4xl mx-auto p-4">
  <!-- Form Section -->
  <div
    class="bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl p-8 mb-8 border border-gray-100"
  >
    <div class="flex items-center gap-3 mb-4">
      <div
        class="w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center"
      >
        <i class="fas fa-robot text-white text-xl"></i>
      </div>
      <div>
        <h2 class="text-2xl font-bold text-gray-800">AI Symptoms Checker</h2>
        <p class="text-sm text-gray-600">Powered by Medical AI Assistant</p>
      </div>
    </div>

    <p class="text-gray-600 mb-6 bg-blue-50/50 p-4 rounded-xl border border-blue-100">
      <i class="fas fa-info-circle text-blue-500 mr-2"></i>
      Write your symptoms in simple terms â€” for example: "Headache, fever, and fatigue for the past
      3 days"
    </p>

    <!-- Symptoms Input -->
    <div class="mb-6">
      <label class="block text-sm font-medium text-gray-700 mb-2">
        <i class="fas fa-stethoscope mr-2 text-blue-500"></i>
        Describe Your Symptoms
      </label>
      <div class="relative">
        <textarea
          [(ngModel)]="symptomsText"
          rows="5"
          class="w-full rounded-xl border border-gray-300 p-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none"
          placeholder="Example: Cough, fever, body aches, and loss of appetite..."
        ></textarea>
        <div class="absolute bottom-3 right-3 text-xs text-gray-400">
          <i class="fas fa-keyboard mr-1"></i>
          {{ symptomsText?.length || 0 }}/500
        </div>
      </div>
    </div>

    <!-- Personal Info -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          <i class="fas fa-birthday-cake mr-2 text-blue-500"></i>
          Age
        </label>
        <div class="relative">
          <input
            type="number"
            [(ngModel)]="age"
            class="w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
            placeholder="Your age"
            min="1"
            max="120"
          />
          <span class="absolute right-3 top-3 text-gray-400">years</span>
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          <i class="fas fa-venus-mars mr-2 text-blue-500"></i>
          Gender
        </label>
        <select
          [(ngModel)]="gender"
          class="w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
        >
          <option value="" class="text-gray-400">Select Gender</option>
          <option value="male" class="text-gray-700">Male</option>
          <option value="female" class="text-gray-700">Female</option>
        </select>
      </div>
<!--
      <div class="mb-3">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          <i class="fas fa-upload mr-2 text-blue-500"></i>
          Upload Report / Scan (optional)
        </label>
        <input
          type="file"
          (change)="onFileSelected($event)"
          class="w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all file:border-0 file:bg-blue-50 file:text-blue-700 file:rounded-lg file:px-4 file:py-2"
        />
      </div> -->
    </div>

    <!-- Analyze Button -->
    <div class="flex items-center justify-between">
      <div class="text-sm text-gray-500 flex items-center gap-2">
        <i class="fas fa-shield-alt text-green-500"></i>
        <span>Your data is encrypted and secure</span>
      </div>

      <button
        (click)="submit()"
        [disabled]="loading"
        class="group relative bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-4 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        <i class="fas fa-search-medical"></i>
        <span class="font-medium">Analyze Symptoms</span>
        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
      </button>
    </div>

    <!-- Loading & Error States -->
    <div *ngIf="error" class="mt-4 p-4 bg-red-50 border border-red-200 rounded-xl">
      <div class="flex items-center gap-3 text-red-700">
        <i class="fas fa-exclamation-triangle"></i>
        <span>{{ error }}</span>
      </div>
    </div>

    <div *ngIf="loading" class="mt-6 space-y-4">
      <div class="flex items-center gap-3">
        <div
          class="w-8 h-8 border-2 border-blue-200 border-t-blue-600 rounded-full animate-spin"
        ></div>
        <span class="text-gray-600 font-medium">AI is analyzing your symptoms...</span>
      </div>
      <div class="space-y-3">
        <div
          class="h-4 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full w-3/4 animate-pulse"
        ></div>
        <div
          class="h-4 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full w-1/2 animate-pulse"
        ></div>
        <div class="h-32 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl animate-pulse"></div>
      </div>
    </div>
  </div>

  <!-- Results Section -->
  <div *ngIf="result" class="space-y-6 animate-fadeIn">
    <!-- AI Summary Card -->
    <div
      class="bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl p-6 border border-blue-100"
    >
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-3">
          <div
            class="w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center"
          >
            <i class="fas fa-brain text-white"></i>
          </div>
          <div>
            <h3 class="text-lg font-bold text-gray-800">AI Analysis Summary</h3>
            <div class="flex items-center gap-3 mt-1">
              <div class="flex items-center gap-2">
                <span class="text-sm text-gray-600">Urgency Level:</span>
                <span
                  [ngClass]="urgencyClass(result.urgency)"
                  class="px-3 py-1 rounded-full text-sm font-medium"
                >
                  {{ result.urgency || 'N/A' }}
                </span>
              </div>
              <div class="flex items-center gap-2">
                <i class="fas fa-clock text-gray-400"></i>
                <span class="text-sm text-gray-500">Analyzed just now</span>
              </div>
            </div>
          </div>
        </div>
        <div class="text-right">
          <div class="text-sm text-gray-600">Confidence</div>
          <div class="text-2xl font-bold text-blue-600">92%</div>
        </div>
      </div>

      <!-- Next Steps -->
      <div class="mt-4">
        <h4 class="font-medium text-gray-700 mb-3 flex items-center gap-2">
          <i class="fas fa-directions text-blue-500"></i>
          Recommended Next Steps
        </h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div
            *ngFor="let step of result.next_steps; let i = index"
            class="bg-white p-4 rounded-xl border border-gray-200 hover:border-blue-300 transition-colors"
          >
            <div class="flex items-start gap-3">
              <div
                class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center flex-shrink-0"
              >
                {{ i + 1 }}
              </div>
              <span class="text-gray-700">{{ step }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Possible Diagnoses -->
    <div class="space-y-4">
      <div class="flex items-center justify-between">
        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-2">
          <i class="fas fa-clipboard-check text-blue-500"></i>
          Possible Diagnoses
        </h3>
        <span class="text-sm text-gray-500">
          {{ result.diagnoses?.length || 0 }} conditions detected
        </span>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
        <div
          *ngFor="let d of result.diagnoses || []"
          class="group bg-white rounded-2xl shadow-lg hover:shadow-xl border border-gray-200 hover:border-blue-300 transition-all duration-300 overflow-hidden"
        >
          <!-- Diagnosis Header -->
          <div class="p-5 border-b border-gray-100">
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <h4 class="font-bold text-gray-800 text-lg mb-1">{{ d.name }}</h4>
                <p class="text-gray-600 text-sm">{{ d.reasoning }}</p>
              </div>
              <div class="text-right ml-4">
                <div class="text-sm text-gray-500 mb-1">Confidence</div>
                <div class="relative">
                  <div class="text-2xl font-bold text-blue-600">{{ d.confidence_percent }}%</div>
                  <div class="w-16 h-2 bg-gray-200 rounded-full overflow-hidden mt-1">
                    <div
                      class="h-full bg-blue-500 rounded-full"
                      [style.width]="d.confidence_percent + '%'"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Doctors & Actions -->
          <div class="p-5 bg-gray-50">
            <div class="flex items-center justify-between mb-3">
              <span class="text-sm font-medium text-gray-700">Recommended Specialists:</span>
              <span class="text-xs text-gray-500">{{ d.doctors?.length || 0 }} available</span>
            </div>
            <div class="space-y-2">
              <button
                *ngFor="let doc of d.doctors; let i = index"
                (click)="goToDoctorProfile(doc.id)"
                class="w-full group/doctor flex items-center justify-between p-3 bg-white hover:bg-blue-50 border border-gray-200 hover:border-blue-300 rounded-xl transition-all duration-200"
              >
                <div class="flex items-center gap-3">
                  <div
                    class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-100 to-indigo-100 flex items-center justify-center"
                  >
                    <i class="fas fa-user-md text-blue-600"></i>
                  </div>
                  <div class="text-left">
                    <div class="font-medium text-gray-800">{{ doc.name }}</div>
                    <div class="text-xs text-gray-500">{{ doc.specialty }}</div>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="text-sm text-blue-600 font-medium">View</span>
                  <i
                    class="fas fa-arrow-right text-blue-400 group-hover/doctor:translate-x-1 transition-transform"
                  ></i>
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Disclaimer -->
    <div class="bg-yellow-50 border border-yellow-200 rounded-2xl p-5">
      <div class="flex items-start gap-3">
        <div
          class="w-10 h-10 bg-yellow-100 text-yellow-600 rounded-lg flex items-center justify-center flex-shrink-0"
        >
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div>
          <h4 class="font-medium text-yellow-800 mb-1">Important Disclaimer</h4>
          <p class="text-yellow-700 text-sm">
            This AI-powered diagnostic tool is intended to assist in providing initial diagnoses and
            is not a substitute for medical advice, diagnosis, or treatment. Consult your physician
            or other qualified healthcare provider regarding any medical condition.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .animate-fadeIn {
    animation: fadeIn 0.5s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Urgency Level Styles */
  .urgency-high {
    background: linear-gradient(135deg, #fecaca, #fca5a5);
    color: #dc2626;
  }

  .urgency-medium {
    background: linear-gradient(135deg, #fde68a, #fbbf24);
    color: #d97706;
  }

  .urgency-low {
    background: linear-gradient(135deg, #bbf7d0, #34d399);
    color: #059669;
  }

  .urgency-unknown {
    background: linear-gradient(135deg, #e5e7eb, #9ca3af);
    color: #4b5563;
  }
</style>
