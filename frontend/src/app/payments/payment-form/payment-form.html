<!-- Page Background -->
<div class="min-h-screen bg-blue-50 flex items-center justify-center p-6">

  <!-- Payment Form Card -->
  <div [class.filter]="showModal" 
       [class.blur-sm]="showModal"
       class="relative max-w-xl w-full p-8 bg-white rounded-2xl shadow-xl border border-gray-200 transition-all duration-300">

    <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Make a Payment</h2>

    <form [formGroup]="paymentForm" (ngSubmit)="confirmPayment()" class="space-y-6">

      <!-- Invoice ID -->
      <div>
        <label class="block text-gray-600 font-medium mb-2">Invoice ID</label>
        <input formControlName="invoice_id" type="text" readonly
               class="w-full border rounded-xl px-4 py-2 bg-gray-100 cursor-not-allowed focus:ring-2 focus:ring-blue-400">
      </div>

      <!-- Amount -->
      <div>
        <label class="block text-gray-600 font-medium mb-2">Amount</label>
        <input formControlName="amount" type="text" readonly
               class="w-full border rounded-xl px-4 py-2 bg-gray-100 cursor-not-allowed focus:ring-2 focus:ring-blue-400">
      </div>

      <!-- Payment Method -->
      <div>
        <label class="block text-gray-600 font-medium mb-2">Payment Method</label>
        <select formControlName="method" (change)="onMethodChange()"
                class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-blue-400">
          <option value="cash">Cash</option>
          <option value="card">Card</option>
          <option value="wallet">Wallet</option>
        </select>
      </div>

      <!-- Card Info -->
      <div *ngIf="isCard" class="p-4 bg-gray-50 rounded-xl border border-gray-200 space-y-4">
        <div>
          <label class="block text-gray-600 mb-1">Card Holder</label>
          <input formControlName="card_holder" type="text"
                 class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-blue-400">
        </div>

        <div>
          <label class="block text-gray-600 mb-1">Card Number</label>
          <input formControlName="card_number" type="text" maxlength="16"
                 class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-blue-400">
        </div>

        <div class="flex gap-4">
          <div class="flex-1">
                <label class="block text-gray-600 mb-1">Expiry Date</label>
                <input formControlName="expiry_date" 
                    type="month" 
                    [min]="minExpiryDate"
                    class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-blue-400">
            </div>
          <div class="flex-1">
            <label class="block text-gray-600 mb-1">CVV</label>
            <input formControlName="cvv" type="password" maxlength="4"
                   class="w-full border rounded-xl px-4 py-2 focus:ring-2 focus:ring-blue-400">
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit"
              class="w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-blue-500 transition-all duration-300 shadow-lg">
        Submit Payment
      </button>

    </form>

  </div>

  <!-- Floating Modal -->
  <div *ngIf="showModal" class="absolute inset-0 flex items-center justify-center z-50 pointer-events-none">
    <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-8 text-center transform transition-transform duration-500 scale-90 pointer-events-auto animate-scaleUp">
      <h3 class="text-2xl font-bold text-green-600 mb-4">Payment Successful!</h3>
      <p class="text-gray-700 mb-6">Your payment has been processed successfully.</p>
      <button (click)="closeModal()"
              class="w-full py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition">
        OK
      </button>
    </div>
  </div>

</div>
